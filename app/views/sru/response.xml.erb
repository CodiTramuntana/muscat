<?xml version="1.0" encoding="UTF-8"?>

<% model = request.env["PATH_INFO"].split("/").last %>
<% @sru   = Sru::Query.new(model, params) %>
<% @result   = @sru.result %>

<% if !params['operation'] || !params['query'] %>
  <%= render :partial => 'explain' %>
<% elsif !@sru.error_code && @result %>
  <%= render :partial => 'result' %>
<% else %>
  <%= render :partial => 'error' %>
<% end %>
