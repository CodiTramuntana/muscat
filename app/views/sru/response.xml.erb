<?xml version="1.0" encoding="UTF-8"?>

<% model = request.env["PATH_INFO"].split("/").last %>
<% @sru   = Sru::Query.new(model, params) %>
<% @result   = @sru.response %>

<% if !params['operation'] || !params['query'] %>
  <%= render :partial => 'explain' %>
<% elsif !@sru.error_code && @result.instance_of?(Sunspot::Search::StandardSearch) %>
  <%= render :partial => 'result' %>
<% else %>
  <%= render :partial => 'error' %>
<% end %>
