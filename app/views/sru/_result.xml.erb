<zs:searchRetrieveResponse xmlns:zs="http://www.loc.gov/zing/srw/" xmlns:marc="http://www.loc.gov/MARC21/slim">
    <zs:version>1.1</zs:version>
    <zs:numberOfRecords><%= @result.total  %></zs:numberOfRecords>
    <zs:records>
      <% offset = @sru.offset.to_i %>
      <% @result.hits.each do |hit| %>
        <zs:record>
          <zs:recordPacking>xml</zs:recordPacking>
          <zs:recordData>
            <%= hit.result.marc.to_xml_record(nil, nil).html_safe %>
          </zs:recordData>
          <zs:recordPosition><%= offset %><% offset += 1 %></zs:recordPosition>
        </zs:record>
      <% end %>
    </zs:records>
    <zs:echoedSearchRetrieveRequest>
      <zs:version>1.1</zs:version>
      <zs:query><%= params["query"] %></zs:query>
      <zs:maximumRecords><%= @sru.maximumRecords %></zs:maximumRecords>
      <zs:recordPacking>xml</zs:recordPacking>
    </zs:echoedSearchRetrieveRequest>
  </zs:searchRetrieveResponse>


